{"ast":null,"code":"import _slicedToArray from \"/Users/vlv/42/matchaChat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/vlv/42/matchaChat/client/src/Components/UserCards/UserCardContext.js\";\nimport React, { useState, createContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Axios from \"axios\";\nexport const UserCardContext = createContext();\nexport const UserCardProvider = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLiked = _useState2[0],\n        setLiked = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isBlocked = _useState4[0],\n        setBlocked = _useState4[1];\n\n  const _useState5 = useState([props.user][0]),\n        _useState6 = _slicedToArray(_useState5, 1),\n        userInfo = _useState6[0];\n\n  const handleLike = () => {\n    Axios.post(\"http://localhost:9000/api/rel/like\", {\n      userSource: props.session.login,\n      target: userInfo.login,\n      jwt: props.session.jwt,\n      liked: isLiked\n    }).then(res => {\n      if (res.status === 200) {\n        setLiked(true);\n      } else if (res.status === 201) {\n        setLiked(false);\n      } else alert(\"JWT eror\");\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleBlock = () => {\n    Axios.post(\"http://localhost:9000/api/rel/block\", {\n      userSource: props.session.login,\n      target: userInfo.login,\n      jwt: props.session.jwt,\n      blocked: isBlocked\n    }).then(res => {\n      if (res.status === 200) {\n        setBlocked(true);\n      } else if (res.status === 201) {\n        setBlocked(false);\n      } else alert(\"JWT eror, it looks like you are trying to fuck us :)\");\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    const api1 = \"http://localhost:9000/api/rel/\";\n    const api2 = \"?userSource=\".concat(props.session.login, \"&target=\").concat(userInfo.login, \"&jwt=\").concat(props.session.jwt);\n\n    const getLike = async () => {\n      const result = await axios.get(\"\".concat(api1, \"like\").concat(api2));\n      if (result.data) setLiked(true);\n    };\n\n    const getBlock = async () => {\n      const result = await axios.get(\"\".concat(api1, \"block\").concat(api2));\n      if (result.data) setBlocked(true);\n    };\n\n    getBlock();\n    getLike();\n  });\n  return React.createElement(UserCardContext.Provider, {\n    value: [isLiked, handleLike, isBlocked, handleBlock, userInfo],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, props.children);\n};","map":{"version":3,"sources":["/Users/vlv/42/matchaChat/client/src/Components/UserCards/UserCardContext.js"],"names":["React","useState","createContext","useEffect","axios","Axios","UserCardContext","UserCardProvider","props","isLiked","setLiked","isBlocked","setBlocked","user","userInfo","handleLike","post","userSource","session","login","target","jwt","liked","then","res","status","alert","catch","err","console","log","handleBlock","blocked","api1","api2","getLike","result","get","data","getBlock","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,aAA1B,EAAyCC,SAAzC,QAA0D,OAA1D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,eAAe,GAAGJ,aAAa,EAArC;AAEP,OAAO,MAAMK,gBAAgB,GAAGC,KAAK,IAAI;AAAA,oBACXP,QAAQ,CAAC,KAAD,CADG;AAAA;AAAA,QAChCQ,OADgC;AAAA,QACvBC,QADuB;;AAAA,qBAEPT,QAAQ,CAAC,KAAD,CAFD;AAAA;AAAA,QAEhCU,SAFgC;AAAA,QAErBC,UAFqB;;AAAA,qBAGpBX,QAAQ,CAAC,CAACO,KAAK,CAACK,IAAP,EAAa,CAAb,CAAD,CAHY;AAAA;AAAA,QAGhCC,QAHgC;;AAKvC,QAAMC,UAAU,GAAG,MAAM;AACvBV,IAAAA,KAAK,CAACW,IAAN,CAAW,oCAAX,EAAiD;AAC/CC,MAAAA,UAAU,EAAET,KAAK,CAACU,OAAN,CAAcC,KADqB;AAE/CC,MAAAA,MAAM,EAAEN,QAAQ,CAACK,KAF8B;AAG/CE,MAAAA,GAAG,EAAEb,KAAK,CAACU,OAAN,CAAcG,GAH4B;AAI/CC,MAAAA,KAAK,EAAEb;AAJwC,KAAjD,EAMGc,IANH,CAMQC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtBf,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,OAFD,MAEO,IAAIc,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AAC7Bf,QAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,OAFM,MAEAgB,KAAK,CAAC,UAAD,CAAL;AACR,KAZH,EAaGC,KAbH,CAaSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KAfH;AAgBD,GAjBD;;AAmBA,QAAMG,WAAW,GAAG,MAAM;AACxB1B,IAAAA,KAAK,CAACW,IAAN,CAAW,qCAAX,EAAkD;AAChDC,MAAAA,UAAU,EAAET,KAAK,CAACU,OAAN,CAAcC,KADsB;AAEhDC,MAAAA,MAAM,EAAEN,QAAQ,CAACK,KAF+B;AAGhDE,MAAAA,GAAG,EAAEb,KAAK,CAACU,OAAN,CAAcG,GAH6B;AAIhDW,MAAAA,OAAO,EAAErB;AAJuC,KAAlD,EAMGY,IANH,CAMQC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtBb,QAAAA,UAAU,CAAC,IAAD,CAAV;AACD,OAFD,MAEO,IAAIY,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AAC7Bb,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OAFM,MAEAc,KAAK,CAAC,sDAAD,CAAL;AACR,KAZH,EAaGC,KAbH,CAaSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KAfH;AAgBD,GAjBD;;AAmBAzB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM8B,IAAI,mCAAV;AACA,UAAMC,IAAI,yBAAkB1B,KAAK,CAACU,OAAN,CAAcC,KAAhC,qBACRL,QAAQ,CAACK,KADD,kBAEFX,KAAK,CAACU,OAAN,CAAcG,GAFZ,CAAV;;AAIA,UAAMc,OAAO,GAAG,YAAY;AAC1B,YAAMC,MAAM,GAAG,MAAMhC,KAAK,CAACiC,GAAN,WAAaJ,IAAb,iBAAwBC,IAAxB,EAArB;AACA,UAAIE,MAAM,CAACE,IAAX,EAAiB5B,QAAQ,CAAC,IAAD,CAAR;AAClB,KAHD;;AAKA,UAAM6B,QAAQ,GAAG,YAAY;AAC3B,YAAMH,MAAM,GAAG,MAAMhC,KAAK,CAACiC,GAAN,WAAaJ,IAAb,kBAAyBC,IAAzB,EAArB;AACA,UAAIE,MAAM,CAACE,IAAX,EAAiB1B,UAAU,CAAC,IAAD,CAAV;AAClB,KAHD;;AAKA2B,IAAAA,QAAQ;AACRJ,IAAAA,OAAO;AACR,GAlBQ,CAAT;AAoBA,SACE,oBAAC,eAAD,CAAiB,QAAjB;AACE,IAAA,KAAK,EAAE,CAAC1B,OAAD,EAAUM,UAAV,EAAsBJ,SAAtB,EAAiCoB,WAAjC,EAA8CjB,QAA9C,CADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGN,KAAK,CAACgC,QAHT,CADF;AAOD,CAtEM","sourcesContent":["import React, { useState, createContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Axios from \"axios\";\n\nexport const UserCardContext = createContext();\n\nexport const UserCardProvider = props => {\n  const [isLiked, setLiked] = useState(false);\n  const [isBlocked, setBlocked] = useState(false);\n  const [userInfo] = useState([props.user][0]);\n\n  const handleLike = () => {\n    Axios.post(\"http://localhost:9000/api/rel/like\", {\n      userSource: props.session.login,\n      target: userInfo.login,\n      jwt: props.session.jwt,\n      liked: isLiked\n    })\n      .then(res => {\n        if (res.status === 200) {\n          setLiked(true);\n        } else if (res.status === 201) {\n          setLiked(false);\n        } else alert(\"JWT eror\");\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  const handleBlock = () => {\n    Axios.post(\"http://localhost:9000/api/rel/block\", {\n      userSource: props.session.login,\n      target: userInfo.login,\n      jwt: props.session.jwt,\n      blocked: isBlocked\n    })\n      .then(res => {\n        if (res.status === 200) {\n          setBlocked(true);\n        } else if (res.status === 201) {\n          setBlocked(false);\n        } else alert(\"JWT eror, it looks like you are trying to fuck us :)\");\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  useEffect(() => {\n    const api1 = `http://localhost:9000/api/rel/`;\n    const api2 = `?userSource=${props.session.login}&target=${\n      userInfo.login\n    }&jwt=${props.session.jwt}`;\n\n    const getLike = async () => {\n      const result = await axios.get(`${api1}like${api2}`);\n      if (result.data) setLiked(true);\n    };\n\n    const getBlock = async () => {\n      const result = await axios.get(`${api1}block${api2}`);\n      if (result.data) setBlocked(true);\n    };\n\n    getBlock();\n    getLike();\n  });\n\n  return (\n    <UserCardContext.Provider\n      value={[isLiked, handleLike, isBlocked, handleBlock, userInfo]}\n    >\n      {props.children}\n    </UserCardContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}